{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://openjobspec.org/schemas/v1/http/enqueue-response.json",
  "title": "OJS HTTP Enqueue Response",
  "description": "Response body for POST /ojs/v1/jobs (201 Created). Returns the full job envelope with system-managed attributes.",
  "type": "object",
  "required": ["job"],
  "properties": {
    "job": {
      "title": "Created Job",
      "description": "The complete job envelope including all system-managed attributes.",
      "type": "object",
      "required": ["id", "type", "state", "args", "queue", "attempt", "created_at"],
      "properties": {
        "id": {
          "title": "Job ID",
          "description": "UUIDv7 identifier assigned to the job.",
          "type": "string",
          "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-7[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$",
          "examples": ["019414d4-8b2e-7c3a-b5d1-f0e2a3b4c5d6"]
        },
        "type": {
          "title": "Job Type",
          "description": "Dot-namespaced job type.",
          "type": "string",
          "examples": ["email.send"]
        },
        "state": {
          "title": "Job State",
          "description": "Initial lifecycle state. 'available' for immediate jobs, 'scheduled' for delayed jobs.",
          "type": "string",
          "enum": ["available", "scheduled", "pending"],
          "examples": ["available", "scheduled"]
        },
        "args": {
          "title": "Job Arguments",
          "description": "The job arguments as submitted.",
          "type": "array",
          "items": true
        },
        "meta": {
          "title": "Metadata",
          "description": "The job metadata as submitted.",
          "type": "object",
          "additionalProperties": true
        },
        "queue": {
          "title": "Queue",
          "description": "The queue the job was enqueued to.",
          "type": "string",
          "examples": ["email", "default"]
        },
        "priority": {
          "title": "Priority",
          "description": "The priority assigned to the job.",
          "type": "integer",
          "examples": [0, 10]
        },
        "attempt": {
          "title": "Attempt",
          "description": "Current attempt number (0 for a newly created job).",
          "type": "integer",
          "examples": [0]
        },
        "max_attempts": {
          "title": "Max Attempts",
          "description": "Maximum number of attempts from the retry policy.",
          "type": "integer",
          "examples": [3, 5]
        },
        "created_at": {
          "title": "Created At",
          "description": "ISO 8601 timestamp when the job was created.",
          "type": "string",
          "format": "date-time",
          "examples": ["2026-02-12T10:30:00.000Z"]
        },
        "enqueued_at": {
          "title": "Enqueued At",
          "description": "ISO 8601 timestamp when the job became available.",
          "type": "string",
          "format": "date-time",
          "examples": ["2026-02-12T10:30:00.123Z"]
        },
        "scheduled_at": {
          "title": "Scheduled At",
          "description": "ISO 8601 timestamp for delayed execution, if applicable.",
          "type": "string",
          "format": "date-time"
        },
        "tags": {
          "title": "Tags",
          "description": "Tags assigned to the job.",
          "type": "array",
          "items": {"type": "string"}
        }
      },
      "additionalProperties": true
    }
  },
  "additionalProperties": false,
  "examples": [
    {
      "job": {
        "id": "019414d4-8b2e-7c3a-b5d1-f0e2a3b4c5d6",
        "type": "email.send",
        "state": "available",
        "args": ["user@example.com", "welcome", {"locale": "en"}],
        "meta": {
          "trace_id": "trace_abc123def456",
          "source": "signup-service"
        },
        "queue": "email",
        "priority": 0,
        "attempt": 0,
        "max_attempts": 5,
        "created_at": "2026-02-12T10:30:00.000Z",
        "enqueued_at": "2026-02-12T10:30:00.123Z",
        "tags": ["onboarding", "email"]
      }
    }
  ]
}
